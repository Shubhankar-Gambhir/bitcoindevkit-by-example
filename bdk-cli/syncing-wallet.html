<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Syncing a Wallet - BDK by Example</title> <meta name="Description" content="Exploring the bitcoindevkit through a series of examples"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Syncing a Wallet | BDK by Example</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Syncing a Wallet" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Exploring the bitcoindevkit through a series of examples" /> <meta property="og:description" content="Exploring the bitcoindevkit through a series of examples" /> <meta property="og:site_name" content="BDK by Example" /> <meta property="og:image" content="/img/bitcoindevkit.svg" /> <meta property="og:image:height" content="100" /> <meta property="og:image:width" content="100" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="/img/bitcoindevkit.svg" /> <meta property="twitter:title" content="Syncing a Wallet" /> <script type="application/ld+json"> {"url":"/bdk-cli/syncing-wallet","image":{"height":100,"width":100,"url":"/img/bitcoindevkit.svg","@type":"imageObject"},"description":"Exploring the bitcoindevkit through a series of examples","headline":"Syncing a Wallet","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> BDK by Example </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/bdk" class="nav-list-link">Rust</a><ul class="nav-list "><li class="nav-list-item "><a href="/bdk/sync-descriptor" class="nav-list-link">Sync Balance of Descriptor</a></li><li class="nav-list-item "><a href="/bdk/generate-addresses" class="nav-list-link">Generate Addresses</a></li><li class="nav-list-item "><a href="/bdk/create-transaction" class="nav-list-link">Create a Transaction</a></li><li class="nav-list-item "><a href="/bdk/sign-transaction" class="nav-list-link">Sign a Transaction</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/bdk-cli" class="nav-list-link">Command Line</a><ul class="nav-list "><li class="nav-list-item "><a href="/bdk-cli/getting-started" class="nav-list-link">Getting Started</a></li><li class="nav-list-item "><a href="/bdk-cli/basic-workflow" class="nav-list-link">Basic Workflow</a></li><li class="nav-list-item "><a href="/bdk-cli/man-pages" class="nav-list-link">Using the Man Pages</a></li><li class="nav-list-item "><a href="/bdk-cli/map-subcommands" class="nav-list-link">Map of Subcommands</a></li><li class="nav-list-item "><a href="/bdk-cli/example-wallet" class="nav-list-link">Example Wallet</a></li><li class="nav-list-item "><a href="/bdk-cli/generating-new-keys" class="nav-list-link">Generating new keys</a></li><li class="nav-list-item active"><a href="/bdk-cli/syncing-wallet" class="nav-list-link active">Syncing a Wallet</a></li><li class="nav-list-item "><a href="/bdk-cli/receiving-coins" class="nav-list-link">Receiving Coins</a></li><li class="nav-list-item "><a href="/bdk-cli/multisig" class="nav-list-link">Multisignature</a></li><li class="nav-list-item "><a href="/bdk-cli/sending-coins" class="nav-list-link">Sending Coins</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/bdk-jni" class="nav-list-link">Android</a><ul class="nav-list "><li class="nav-list-item "><a href="/bdk-jni/getting-started" class="nav-list-link">Getting Started</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search BDK by Example" aria-label="Search BDK by Example" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/bdk-cli">Command Line</a></li> <li class="breadcrumb-nav-list-item"><span>Syncing a Wallet</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="creating-and-syncing-a-wallet"> <a href="#creating-and-syncing-a-wallet" class="anchor-heading" aria-labelledby="creating-and-syncing-a-wallet"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating and Syncing a Wallet </h1> <p><br /></p> <p>All wallet operations use the <code class="language-plaintext highlighter-rouge">wallet</code> subcommand. You sync your wallet to the blockchain with the appropriately named <code class="language-plaintext highlighter-rouge">sync</code> subcommand:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bdk-cli wallet <span class="nt">--descriptor</span> <span class="s2">"wpkh(tprv8ZgxMBicQKsPdTayefG3Up8B1Rq3AwqQDfvEjt6oJCCwse3s79er2hYn8erb4rTgddL55SGKa8TjkoytzZXc7Kj4BLZwu2rzCFbE1KMfQtF/84'/1'/0'/0/*)"</span> <span class="nb">sync</span>  
</code></pre></div></div> <p>When we give <code class="language-plaintext highlighter-rouge">bdk-cli</code> a descriptor, it creates a entry for us in a small <a href=""><code class="language-plaintext highlighter-rouge">sled</code></a> database located at <code class="language-plaintext highlighter-rouge">~/.bdk-bitcoin/</code> on our machine. This wallet does not actually contain the descriptor (hence the need to provide it at every command) but does keep track of a few things for you that make it convenient. Note that you can delete this database at any time without loosing anything that cannot be rebuilt by syncing back up.</p> <p>This sort of “cache” has a default name of <em>main</em>, and if you try and give bdk a new command but with a different descriptor (say you want to test with multiple wallets at once), it will throw an error, since the new descriptor will not match the currently existing ‘main’ wallet in the database.</p> <p>The way to play with multiple wallets at once is to name them as they are being created and used. The command above could be modified like so:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bdk-cli wallet <span class="nt">--wallet</span> <span class="s2">"testwalletnumber1"</span> <span class="nt">--descriptor</span> <span class="s2">"wpkh(tprv8ZgxMBicQKsPdTayefG3Up8B1Rq3AwqQDfvEjt6oJCCwse3s79er2hYn8erb4rTgddL55SGKa8TjkoytzZXc7Kj4BLZwu2rzCFbE1KMfQtF/84'/1'/0'/0/*)"</span> <span class="nb">sync</span>  
</code></pre></div></div> <p>which will create a wallet called <code class="language-plaintext highlighter-rouge">testwalletnumber1</code> in the database. If you are dealing with multiple wallets, you must provide the <code class="language-plaintext highlighter-rouge">--wallet</code> option every time, unless you wish to use the default wallet.</p> </div> </div> <a href="#" id="search-button" class="search-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-search"></use></svg> </a> <div class="search-overlay"></div> </div> </body> </html>
